install.packages(c("ggplot2", "data.table", "plyr", "reshape2"))
wd <- "D:\DG-Papers\GitHub\Website\dorian.gravier.github.io\gpx"
setwd(wd)
library(data.table)
wd <- "D:\DG-Papers\GitHub\Website\dorian.gravier.github.io\gpx"
setwd(wd)
lis <- list.files(wd, full = T)
wd <- "D:/DG-Papers/GitHub/Website/dorian.gravier.github.io/gpx"
setwd(wd)
lis <- list.files(wd, full = T)
lis
lis <- list.files(wd, full = T, recursive = T)
lis
lis <- data.table(path = list.files(wd, full = T, recursive = T))
lis[, path2 := gsub("D:/DG-Papers/GitHub/Website/dorian.gravier.github.io/", "", path) ]
dirname(lis[1,path2])
lis[, dir := dirname(path2) ]
lis[,.N,dir]
lisdir <- lis[,.N,dir]$dir
lisdir <- unique(lis$dir)
wr <- writeLines("test.txt")
write("// create file", file = "test.txt")
lis
lisdir
write("// create file", file = "test.txt")
for(i in seq_along(lisdir)) {
if( basename(lisdir[i]) == "Project" ) {
varname <- basename(basename(lisdir[i]))
} else {
varname <- basename(lisdir[i])
}
write(paste0("var ", varname, " = ["), file = "test.txt", append = T)
for( j in 1:nrow(lisdir)) {
if( j == nrow(lisdir)) {
write(paste0("'", lis[j, path2], "']\n"), file = "test.txt", append = T)
} else {
write(paste0("'", lis[j, path2], "',"), file = "test.txt", append = T)
}
}
write(paste0("var ", varname, " = ["), file = "test.txt", append = T)
}
for(i in seq_along(lisdir)) {
if( basename(lisdir[i]) == "Project" ) {
varname <- basename(basename(lisdir[i]))
} else {
varname <- basename(lisdir[i])
}
write(paste0("var ", varname, " = ["), file = "test.txt", append = T)
for( j in 1:nrow(lis)) {
if( j == nrow(lis)) {
write(paste0("'", lis[j, path2], "']\n"), file = "test.txt", append = T)
} else {
write(paste0("'", lis[j, path2], "',"), file = "test.txt", append = T)
}
}
write(paste0("var ", varname, " = ["), file = "test.txt", append = T)
}
write("// create file", file = "test.txt")
for(i in seq_along(lisdir)) {
if( basename(lisdir[i]) == "Project" ) {
varname <- basename(basename(lisdir[i]))
} else {
varname <- basename(lisdir[i])
}
write(paste0("var ", varname, " = ["), file = "test.txt", append = T)
for( j in 1:nrow(lis)) {
if( j == nrow(lis)) {
write(paste0("'", lis[dir == lisdir[i]][j, path2], "']\n"), file = "test.txt", append = T)
} else {
write(paste0("'", lis[dir == lisdir[i]][j, path2], "',"), file = "test.txt", append = T)
}
}
write(paste0("var ", varname, " = ["), file = "test.txt", append = T)
}
write("// create file", file = "test.txt")
for(i in seq_along(lisdir)) {
if( basename(lisdir[i]) == "Project" ) {
varname <- basename(basename(lisdir[i]))
} else {
varname <- basename(lisdir[i])
}
lis2 <- lis[dir == lisdir[i]]
write(paste0("var ", varname, " = ["), file = "test.txt", append = T)
for( j in 1:nrow(lis2)) {
if( j == nrow(lis2)) {
write(paste0("'", lis2[j, path2], "']\n"), file = "test.txt", append = T)
} else {
write(paste0("'", lis2[j, path2], "',"), file = "test.txt", append = T)
}
}
write(paste0("var ", varname, " = ["), file = "test.txt", append = T)
}
i=1
basename(lisdir[i])
lisdir
i=3
basename(lisdir[i]) == "Project"
basename(basename(lisdir[i]))
basename(dirname(lisdir[i]))
write("// create file", file = "test.txt")
for(i in seq_along(lisdir)) {
if( basename(lisdir[i]) == "Project" ) {
varname <- basename(dirname(lisdir[i]))
} else {
varname <- basename(lisdir[i])
}
write(paste0("var ", varname, " = ["), file = "test.txt", append = T)
lis2 <- lis[dir == lisdir[i]]
for( j in 1:nrow(lis2)) {
if( j == nrow(lis2)) {
write(paste0("'", lis2[j, path2], "']\n"), file = "test.txt", append = T)
} else {
write(paste0("'", lis2[j, path2], "',"), file = "test.txt", append = T)
}
}
write(paste0("var ", varname, " = ["), file = "test.txt", append = T)
}
write("// create file", file = "test.txt")
for(i in seq_along(lisdir)) {
if( basename(lisdir[i]) == "Project" ) {
varname <- basename(dirname(lisdir[i]))
} else {
varname <- basename(lisdir[i])
}
write(paste0("var ", varname, " = ["), file = "test.txt", append = T)
lis2 <- lis[dir == lisdir[i]]
for( j in 1:nrow(lis2)) {
if( j == nrow(lis2)) {
write(paste0("'", lis2[j, path2], "']\n"), file = "test.txt", append = T)
} else {
write(paste0("'", lis2[j, path2], "',"), file = "test.txt", append = T)
}
}
}
write("// create file", file = "Name_var_js-html_tocopy_in_leaftlet")
for(i in seq_along(lisdir)) {
if( basename(lisdir[i]) == "Project" ) {
varname <- basename(dirname(lisdir[i]))
} else {
varname <- basename(lisdir[i])
}
write(paste0("var ", varname, " = ["), file = "Name_var_js-html_tocopy_in_leaftlet", append = T)
lis2 <- lis[dir == lisdir[i]]
for( j in 1:nrow(lis2)) {
if( j == nrow(lis2)) {
write(paste0("'", lis2[j, path2], "']\n"), file = "Name_var_js-html_tocopy_in_leaftlet", append = T)
} else {
write(paste0("'", lis2[j, path2], "',"), file = "Name_var_js-html_tocopy_in_leaftlet", append = T)
}
}
}
library(data.table)
wd <- "D:/DG-Papers/GitHub/Website/dorian.gravier.github.io/gpx"
setwd(wd)
lis <- data.table(path = list.files(wd, full = T, recursive = T))
lis[, path2 := gsub("D:/DG-Papers/GitHub/Website/dorian.gravier.github.io/", "", path) ]
lis[, dir := dirname(path2) ]
lisdir <- unique(lis$dir)
write("// create file", file = "Name_var_js-html_tocopy_in_leaflet.txt")
for(i in seq_along(lisdir)) {
if( basename(lisdir[i]) == "Project" ) {
varname <- basename(dirname(lisdir[i]))
} else {
varname <- basename(lisdir[i])
}
write(paste0("var ", varname, " = ["), file = "Name_var_js-html_tocopy_in_leaflet.txt", append = T)
lis2 <- lis[dir == lisdir[i]]
for( j in 1:nrow(lis2)) {
if( j == nrow(lis2)) {
write(paste0("'", lis2[j, path2], "']\n"), file = "Name_var_js-html_tocopy_in_leaflet.txt", append = T)
} else {
write(paste0("'", lis2[j, path2], "',"), file = "Name_var_js-html_tocopy_in_leaflet.txt", append = T)
}
}
}
library(data.table)
wd <- "D:/DG-Papers/GitHub/Website/dorian.gravier.github.io/gpx"
setwd(wd)
lis <- data.table(path = list.files(wd, full = T, recursive = T))
lis[, path2 := gsub("D:/DG-Papers/GitHub/Website/dorian.gravier.github.io/", "", path) ]
lis[, dir := dirname(path2) ]
lisdir <- unique(lis$dir)
write("// create file", file = "Name_var_js-html_tocopy_in_leaflet.txt")
for(i in seq_along(lisdir)) {
if( basename(lisdir[i]) == "Project" ) {
varname <- paste0(basename(dirname(lisdir[i])), basename(lisdir[i]))
} else {
varname <- basename(lisdir[i])
}
write(paste0("var ", varname, " = ["), file = "Name_var_js-html_tocopy_in_leaflet.txt", append = T)
lis2 <- lis[dir == lisdir[i]]
for( j in 1:nrow(lis2)) {
if( j == nrow(lis2)) {
write(paste0("'", lis2[j, path2], "']\n"), file = "Name_var_js-html_tocopy_in_leaflet.txt", append = T)
} else {
write(paste0("'", lis2[j, path2], "',"), file = "Name_var_js-html_tocopy_in_leaflet.txt", append = T)
}
}
}
